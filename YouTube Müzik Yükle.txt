<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YouTube MÃ¼zik YÃ¼kle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      text-align: center;
      padding: 20px;
      background: #fff;
      color: #000;
    }
    input, button, select, textarea {
      width: 90%;
      max-width: 500px;
      margin: 10px auto;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
      display: block;
    }
    button {
      background: #ff4b2b;
      color: #fff;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover { background: #ff416c; }
    .btn-link {
      display: inline-block;
      margin: 10px;
      padding: 10px 20px;
      background: #d00;
      color: #fff;
      text-decoration: none;
      border-radius: 6px;
    }
    #yt-desc, #log {
      text-align: left;
      background: #151515;
      color: #ddd;
      padding: 12px;
      margin: 10px auto;
      max-width: 500px;
      border-radius: 8px;
      font-size: 13px;
      overflow-x: auto;
    }
  </style>
</head>
<body>

  <h2>YouTube MÃ¼zik YÃ¼kle</h2>

  <input id="title" placeholder="ÅžarkÄ± AdÄ± â€” SanatÃ§Ä± AdÄ±" />
  <textarea id="desc" placeholder="Video aÃ§Ä±klamasÄ±..."></textarea>

  <select id="privacy">
    <option value="private">Gizli</option>
    <option value="unlisted">Liste DÄ±ÅŸÄ±</option>
    <option value="public">Herkese AÃ§Ä±k</option>
  </select>

  <input id="file" type="file" accept="video/*" />
  <input id="thumbnail" type="file" accept="image/*" />
  <input id="releaseDate" type="date" />

  <button id="auth">Google ile GiriÅŸ Yap</button>
  <button id="uploadYT" disabled>YouTube'a YÃ¼kle</button>
  <button id="uploadDrive" disabled>Drive'a YÃ¼kle</button>

  <a class="btn-link" href="https://kudukomuzikyapim.blogspot.com/p/muzik-albumu-satn-al.html" target="_blank">SatÄ±n Al</a>

  <div>
    <div style="background:#2a2a2a; color:#fff; padding:10px; border-radius:10px; display:flex; align-items:center; gap:10px; margin-top:10px; justify-content:center;">
      <span id="copyText">@KudukoMÃ¼zikYapÄ±m.Official</span>
      <button onclick="copyToClipboard('copyText')" style="background:#ff0000; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;">ðŸ“‹ Kopyala</button>
    </div>

    <div id="yt-desc">
      <p>Provided to YouTube by Kuduko MÃ¼zik YapÄ±m</p>
      <p><strong id="sampleTitle">ÅžarkÄ± AdÄ± (Official Music)</strong> Â· Kuduko MÃ¼zik YapÄ±m</p>
      <p id="sampleRepeat">ÅžarkÄ± AdÄ± (Official Music)</p>
      <p>â„— Kuduko MÃ¼zik YapÄ±m</p>
      <br>
      <p>YouTube KanalÄ±: https://www.youtube.com/@KudukoMÃ¼zikYapÄ±m.Official</p>
      <p>Ä°nstagram: https://instagram.com/kudukomuzikyapim</p>
      <p>TikTok: https://www.tiktok.com/@kudukomuzikyapm.official</p>
      <p>Snapchat: https://www.snapchat.com/@kuduko550</p>
      <p>Linkedin: https://www.linkedin.com/company/kudukomuzikyapim</p>
      <p>Discogs: https://www.discogs.com/release/33396431-Kuduko-M%C3%BCzik-Yap%C4%B1m-Plak-%C5%9Eirketi</p>
      <p>WhatsApp Grubumuza KatÄ±lÄ±n: https://grupbul.com/grup/645305</p>
      <p>Web site: https://kudukomuzikyapim.blogspot.com</p>
      <p>MaÄŸaza: https://kudukomuzikyapim.company.site</p>
      <p>â„— & Â© Kuduko MÃ¼zik YapÄ±m. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
      <p id="releaseDateParagraph" style="margin-top: 10px; font-style: italic;"></p>
    </div>

    <button onclick="copyToClipboard('yt-desc')" style="margin-top:10px; padding:6px 12px; cursor:pointer; border:none; border-radius:5px; background:#ff0000; color:#fff;">ðŸ“‹ AÃ§Ä±klamayÄ± Kopyala</button>

    <pre id="log"></pre>

    <iframe width="100%" height="300" src="https://www.youtube.com/embed/B5lL1mn3LpU" frameborder="0" allowfullscreen></iframe>

    <a class="btn-link" href="https://kudukomuzikyapim.blogspot.com/p/yaynlar_28.html" target="_blank">YayÄ±nlar SayfasÄ±</a>
  </div>

  <script>
    function copyToClipboard(id) {
      const el = document.getElementById(id);
      const text = el.innerText || el.textContent;
      navigator.clipboard.writeText(text).then(() => alert('KopyalandÄ±!'));
    }

    document.getElementById('title').addEventListener('input', (e) => {
      const t = e.target.value || 'ÅžarkÄ± AdÄ± (Official Music)';
      document.getElementById('sampleTitle').innerText = t;
      document.getElementById('sampleRepeat').innerText = t;
    });

    // releaseDate alanÄ±ndaki tarihi formatlayÄ±p "Released on YYYY-MM-DD" ÅŸeklinde gÃ¶sterir
    document.getElementById('releaseDate').addEventListener('change', (e) => {
      const dateStr = e.target.value;
      if (dateStr) {
        document.getElementById('releaseDateParagraph').textContent = `Released on ${dateStr}`;
      } else {
        document.getElementById('releaseDateParagraph').textContent = '';
      }
    });

    const CLIENT_ID = '831662029531-53aq67biqbtjjjv02fp971qau0lk8mp8.apps.googleusercontent.com';
    const SCOPES = 'https://www.googleapis.com/auth/youtube.upload https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/youtube';

    let accessToken = null;

    window.onload = () => {
      const script = document.createElement('script');
      script.src = 'https://accounts.google.com/gsi/client';
      document.body.appendChild(script);
    };

    document.getElementById('auth').onclick = () => {
      const tokenClient = google.accounts.oauth2.initTokenClient({
        client_id: CLIENT_ID,
        scope: SCOPES,
        callback: (tokenResponse) => {
          accessToken = tokenResponse.access_token;
          document.getElementById('uploadYT').disabled = false;
          document.getElementById('uploadDrive').disabled = false;
        }
      });
      tokenClient.requestAccessToken();
    };

    function log(msg) {
      document.getElementById('log').textContent += msg + '\n';
    }

    document.getElementById('uploadYT').onclick = async () => {
      const fileInput = document.getElementById('file');
      const thumbnailInput = document.getElementById('thumbnail');
      const title = document.getElementById('title').value || 'ÅžarkÄ± AdÄ± (Official Music)';
      const description = document.getElementById('desc').value || '';
      const privacy = document.getElementById('privacy').value;
      const releaseDate = document.getElementById('releaseDate').value;

      if (!fileInput.files.length) {
        alert("LÃ¼tfen bir video dosyasÄ± seÃ§in.");
        return;
      }

      const file = fileInput.files[0];

      log("YouTube'a Video yÃ¼kleniyor...");

      // YouTube aÃ§Ä±klamasÄ±na tarih eklemiyoruz (kullanÄ±cÄ±nÄ±n metnini olduÄŸu gibi gÃ¶nderiyoruz)
      // YouTube API'si yÃ¼kleme sÄ±rasÄ±nda yayÄ±n tarihini otomatik belirler

      const metadata = {
        snippet: {
          title: title,
          description: description
        },
        status: {
          privacyStatus: privacy
        }
      };

      const form = new FormData();
      form.append('snippet', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
      form.append('video', file);

      try {
        const response = await fetch('https://www.googleapis.com/upload/youtube/v3/videos?part=snippet,status', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${accessToken}`
          },
          body: form
        });

        const result = await response.json();

        if (response.ok) {
          log("YouTube'a Video yÃ¼klendi. Video ID: " + result.id);

          if (thumbnailInput.files.length) {
            await uploadThumbnail(result.id, thumbnailInput.files[0]);
          }
        } else {
          log("Hata: " + JSON.stringify(result));
        }

      } catch (err) {
        log("YÃ¼kleme hatasÄ±: " + err.message);
      }
    };

    async function uploadThumbnail(videoId, thumbnailFile) {
      log("YouTube'a Kapak yÃ¼kleniyor...");

      const form = new FormData();
      form.append('media', thumbnailFile);

      const res = await fetch(`https://www.googleapis.com/upload/youtube/v3/thumbnails/set?videoId=${videoId}`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${accessToken}`
        },
        body: form
      });

      const result = await res.json();

      if (res.ok) {
        log("YouTube'a Kapak yÃ¼klendi.");
      } else {
        log("YouTube'a Kapak yÃ¼kleme hatasÄ±: " + JSON.stringify(result));
      }
    }
  </script>
</body>
</html>
